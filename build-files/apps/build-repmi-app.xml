<project
    name="repmi-app"
    default="build"
    basedir=".">

    <import file="${ibis}/build-files/build-properties.xml"/>
    <import file="${ibis}/build-files/apps/build-run.xml"/>

    <description>
	Ibis repmi application build
    </description>

    <target name="repmi"
	    depends="property-init">
	    <!-- Commented out; not toplevel target
	    description="Preprocesses classes in the build tree for RepMI"
	    -->
	<java   classname="ibis.frontend.ibis.Ibisc"
		taskname="Ibisc"
		dir="${build}"
		failonerror="true"
		fork="true">
	    <arg line="-repmi ${repmi-classes}"/>
	    <classpath refid="default.classpath"/>
	</java>
    </target>

    <target name="init">
	<tstamp/>
	<mkdir dir="${build}"/>
    </target>

    <target name="compile"
	    depends="init,property-init">
	    <javac  destdir="${build}"
		debug="true"
		srcdir=".">
	    <classpath refid="default.classpath"/>
	    <include name="**/*.java"/>
	</javac>
    </target>

    <target name="build"
	    depends="init, compile, repmi"
	    description="Compile a RepMI application"/>

    <target name="clean"
	    description="Clean up the build">
	<delete dir="${build}"/>
	<delete file="ant-test.out"/>
    </target>

</project>
