#!/bin/sh

# reserve="-reserve 715713"
timeout="-t 10:0"
# javaflags="-ip-map /home/rutger/myrinet-ip-map"

n=10

sers="byte ibis sun"
# sers="ibis sun"

ibises="panda net.gm"
# ibises="panda"

if true ; then
    for ibis in $ibises ; do
	for (( i = 0; i < $n; i++ )) ; do
	    for ser in $sers ; do
		sh run-rpc $ibis $ser 1000000 0 "$reserve $timeout" "$javaflags"
	    done
	done
    done
fi

ibises="net.tcp_blk net.gen.tcp_blk tcp"
# ibises="net.bytes.gen.tcp_blk"

if true ; then
    for (( i = 0; i < $n; i++ )) ; do
	for ibis in $ibises ; do
	    for (( j = 0; j < 5; j++ )) ; do
		for ser in $sers ; do
		    sh run-rpc $ibis $ser 10000 0 "$reserve $timeout" "$javaflags"
		done
	    done
	done
    done
fi
