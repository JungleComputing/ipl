<project
    name="ibis.impl.messagePassing.native"
    default="build"
    basedir=".">

    <description>
	Compile natives in this directory

	The shared target definitions require you to define:
	    local.includes	a property that contains include paths specific
				to this module

	Optional:
	    local.lib		the truncated name of the lib you want to create
    </description>

    <property name="native.dir" location="."/>
    <property name="cc.outtype" value="static"/>

    <property name="ibis" location="../../../.."/>

    <import file="${ibis}/build-files/build-properties.xml"/>
    <import file="${ibis}/build-files/build-native.xml"/>

    <target name="panda-arch-unix" if="os-is-unix">
	<property name="panda.arch" value="i386_linux"/>
    </target>

    <target name="panda-arch-mac" if="os-is-mac">
	<property name="panda.arch" value="ppc-osX"/>
    </target>

    <target name="panda-arch-windows" if="os-is-windows">
	<property name="panda.arch" value="i386_win32"/>
    </target>

    <target name="panda-arch"
	depends="panda-arch-unix, panda-arch-mac, panda-arch-windows"/>

    <target name="arch-init" depends="property-init, panda-arch">
	<property name="local.lib" value="ibis_mp"/>

	<path id="mp-local.includes-ref">
	    <pathelement path="${ibis}/src/ibis/impl/messagePassing/include"/>
	    <pathelement path="${package.home.panda}/include"/>
	    <pathelement path="${package.home.panda}/include/${panda.arch}/lfc/no_threads"/>
	    <pathelement path="${package.home.daslib}/include"/>
	</path>
	<property name="local.includes" refid="mp-local.includes-ref"/>
	<echo level="verbose" message="local.includes = ${local.includes}"/>
    </target>


    <target name="build" depends="arch-init">
	<antcall inheritRefs="true" target="native"/>
    </target>

</project>
